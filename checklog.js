/**
 * @author Heyboi
 * @name 青龙日志检测
 * @origin Heyboi自用
 * @version 1.0.1
 * @rule ^日志检测$
 * @rule ^checklog$
 * @rule ^(checklog|青龙日志检测)(开|关| on| off)$
 * @admin true
 * @public false
 * @priority 99999
 * @cron *\/30 * * * * *
 * @disable false
 * 
 * 说明：
    1、（必须）在红灯区同级目录创建一个文件夹，名字随意 如：自用插件
    2、仅超授可用
    3、设置 （panelIndex） 执行面板 对应红灯区奶酪棒位置，从0开始
    4、设置插件开关方式二选一：(默认插件关闭)
        方式1：管理员发送set Heyboi checklogSwitc on/off 设置开关（on为启动插件off为关）
        方式2：管理员发送 青龙日志检测开/关 checklog on/off（英文中间有空格，中文没）
 * 注意：
    本插件只针对运行的任务进行判断，去重列表每天刷新。
    excludeKeywords过滤是匹配青龙面板的任务名称，必须一字不差！
    有些脚本接口本身就是403或者493，请及时过滤以免频繁重拨！！！！
    定时（@cron）自己设置，默认30秒
 * 更新：
    5.12  1.0.0版本发布
    
    5.12  1.0.1  支持指定临时日志存放地址，支持推送到第三方bot重拨
                 使用tgBot推送检测日志，支持日志检测开关

 * todo_list：        

    指定日志检测

 * */



const fs = require('fs');
const QlMod = require("../红灯区/mod/AmQlMod");
const AmTool = require("../红灯区/mod/AmTool");
const axios = require('axios').default;
// 临时日志存放地址
const filePath = 'BncrData/plugins/自用插件'
// 需要运行的面板编号
const panelIndex = 0
// 任务过滤,格式为['京东资产变动','东东农场日常任务']
const excludeKeywords = ['京东资产变动'];
// 匹配正则
const regex = /IP 493|ip已被限制|code 403/
// 重拨触发词
const key = '重拨'
// 重拨词发送参数,user_id,group_id默认为空，只有第三方bot重拨才需要填
// bncr重拨插件填写会导致无法触发
const push_info = {
    platform: 'HumanTG',//推送平台
    user_id: '',
    group_id: '',
}
 /** Code Encryption Block[419fd178b7a37c9eae7b7426c4a04203d45e01cd4c8344ffddd8d874f1b64a318191f9514b98d644c03366d9e6625065bb3ada9d277a8f6fb930971e0048b983682a0a997b598f726353e8fdd7adfb165df28759839b20c3a9875fc9fb97aa312c3cef47afe588ed865f3bd39d741abfae8b522d26d6b1935efa27cc3c01cbf3c63d4e1908df90e02a75723a78ecc0f754d87f8f625984627349bded7b173800fbc0c4936e3eb090d57a82671ce51c99f97116e71bda12e3c3a7d353d357e4afd558c5a3c3fa47ec2cd7c924e37ab3c2bec8efa5317b3e6b823884aa8a0c49e8619e2be4d369b13afce7abed7d077e2beffbcc0b51cadadc1cd9764aff3270bf18d28eb1f4a2c7fed827bc6f874998e51e2c456a4c5fd0d13edfb7a93f4597990017046973900ba1982984677d866d289425642e2abb0ec9e1b44e14ff4a8d1d9adb9e5bb03be10ec5c0d89b58ac556868050cfaf710ab51a6e41f372afc5c6e7a7ccbf038f418f616bbdfa140bf0194767a7748159e531330089c4c63a04d4a2d5d32fbd239d40a971b83ab41e9d44459943acc85e7a3c1953b1fb7448dde9ee8c06ec24643355ad15a86a30833aff469158c605aa3f700a683d8a4c1a150483a98cf9f9c7a760b1b5ffc5b14e9db2a4076b4e2e11ebd59c021188aad3e537953f6af3682541a349835977bc6ab3d75823b6bee0f9bfb1ab721929bd448987a257d0f902296fdfe6a10002d51590ba7af39cc8d250772e63aae3c5fa12da9683fec3c2b615aa54e941fec4f55a063158475f054ecaca68dd8a6ad124c98be5ff1dab330643d0943fe49d1b09bc1c2813283dc7b9ca5fc594f1518183273901e07d39c9efc37711258b4f59f0593d2f85f1716049c92c3d4eff0e82b5c2cfafe3d1350b1980219cdbbe1845d8b43465835d24fb91397994ec76c0919f6a37153eb640314172e7d7cde586c92ccff7ad8017a815911eb27eea58f221a2006d1e2cff376844875328b879553e5c69bb24842d7fbdd00b911bfa045ea1000ee31ab760324ca994b8ff247aa463f3a560f4c6cfc38aa0ed599bab9a284109a8d38d0424706cd203efe07fa385da7f6c26eb9366a65f8bf03846fc990909d8ec01fc2075df650e7dcc32c0b51e31af33bdd3c8db7ca5aa2ee5932bf99d551a431875d0f4296d7677c9846d9086d60dd55af7e7951ff9505684702d2d7757155b8ec5fd58c11bb3393bd2bc17b04d067b8e5a1af17f5acbe96535a4a137c9f72ece0786af499edc8a97090f7725cfb354375d044c159d78e6685ce4f4b6043c3a942eba8e6cb999c792e7f2d1e13cc077adf1d535631c33645d9ff58d7cb24cdc2d548dd0f1005963df3cb008ef144b4f8e77e76d245431a6f6e597297c9f3e58e01c2c5463074085f0dc118515dcff50816b5e1834c9bfec99074fac89cfbc302a147d61be8e92c8f25ea4417a2d58bfadaf4a96f520a939751fcbf7b1418db6e613c8e1a9219145809f0fa4557b261a1b86a00dfd1b80e5b2c0cad31318079ffe7d297a450c1bbc4c536d75aeff1776af9062e19c9c64d4c71ec8ef104c664d5df1f181a41daac992d30ea1a725508a6dd82bb263f1bb6f77592de0eebe5edfc75c27b783d1315149491fd8ae9221162c71bbb81a2e7cd4784c85ce5f16f4aa9d1bd6bd44f42c8c20b1d0ea8f94d39b5feefbd1d2b5a58a8ba0496bc91e33a819d7c5a35833d5c55a10818ef5d6dc4f8563365f5568fdc8fe61dbf684eedf89577b2cb1f2ba1e7672dd5510677af330dbba740f11e632d68f8381ee1ca25277f649a3400d414e63e1ffdd25e584949c871b88ec44ca3c4f50451d9dece31f9874b64289cc06d135b8634a65dae47f23a5ec3a32aa341777cc5b52afebe1ef50a7c918568c0884bf32d5aed28617f04ec67e0f2a48d83468d5353c4406f01913bc4faadd6fac6d67d9010f1af6fe24ff5e18131f15ae8c5d2ae3140cc2c617e51d9b7ebd33f06e387f223219771aa6f17f304ad4908e2248d2e3052cd4d74f90ddf2ff7be509e0f845ac2d699337ef1cd2220d3530843e08fbb8705020bbc825717463c3eff68ddbac2495d2b250a9f5a55d7cd9e13749cd1a2b18a72a4dcbd523c59d3999d5073cad3df146a3f17aa1405c474a34981ba599e0c7b289ebd3b11e5178fd037d9dacf2ad5d32e635087d454d58a54825fe77df9645aea6ea593784d544bdc327222d1313e163ed12b38e52f68f8062410fb9988c50ad406c3f5979160638d20d5dfd4d93b26453ec89964490dd027e5b39da62c9c2bbfd1e0fa61e6bd6e924489b0e64bee0e36efc51614cf70433afbdf2d7ea6a7ae3cca49b40090530281dbcec9f764d8b093dab1ebad197d9aa8c174af1ed54bfba03384ad6aeaff36fb43273e67b602b3a9cf35ddd51528e42dd8aa09622cb8cacdba9b5716cc1924f8908bb168ee0ab1fb50fba16876df71ce75f3436ef254d280f9a4b2bf9b40a6996a26216d433fc976edc16e2c15351d403489df62e62048cb960f11657d6ca993b27e8cf57a5d6de9cddc9a2d1a051947ee5246e47ea8eb9bfc17e81b32f107f507ecc2395090fc6b4127fd85690a4e712d0ad849a5bec1b10c45f03b620ac1b91721c28a79ce26769a07e44f5dd9ffd874e7993e47048c8491615914fd3996ec075a1c5709e0debaa1ff71d56817230872b04036da57a16163f2cc102ba4222824b065d9b0038a5be44b2d4c46e7fc5c23a6c1048eb165b0f2d4e9731dcadabbcb587d89d082e266483b6680725deb1a2c0e6b17baee0f8c1ea15ba1cf9585aa6a75bc0bbc4f794c7740a19edeb8b1109afd7044b047c19a01cfb168a13770a669408c0bb80671399cac7c72e69c7384da32734d980396e49110588316c012701dcbf093026223ffa5dfe6088fa393def9e11ece03182694c03040dc89fb334064077971ee343ea51b411324d38d63bda5785980d3e424a589dc933afd59224562ea33ff1bc0a45fa7d9fde618d93b539f3d9549f170227cbf94e5ac7aa034c471ec233ab9ed96816a8d13b834760f683f16e88251853477f30d6fa1efb031f08096896ed6b5ea09945147d44ad8115940d88bd4095e07bb126d389e5094de63ceac5039fd1cb8ce3dc879103bcaadb69cca31ca3f146bc438c49887fef4a76dcfba68a04341d06251b8e62df2d33ce3a0c95728472c190ad35ef28f66a7cef07ba36abbc2bd93fe6070829f70fb7fa93c180d4775268d366d62d5a6a635e2a8288d6da7514046bab102d554c06a16a246bfd3c24fcddb6c9420e2b67b9b8606e4ca63803d82ba5b54cd37486a629141ceeb73da0d7b4c6ebb317f98bca4b79beca58c954e224b33e282af596091c04717aef73139850972ae50ef1fd3d551bf1d33344059b6174453760d2dc7fd1043a275d1e05cecfed8e6417e242d5a531de362adab8ae9b0a09c2fbccab7a3317c8b3dfd37951a5d8af7784d781e5980d51ab964ca6eaaf08eef3a5785df00adfb06b28aa7e77dd14cdde5c9d75df602bb1749ffd15b3a9045e8c93b67d1baf3ec5f7a7cba8ec070f4f63af5271e3141e561f57d3038689798f210985ee87620d21d6182077c657b13883915831d3146128d52c07dc6851ace45db1de3c2bedd1ebdb93d033c4dc17a00430153316839d9ea2fd1daa8c8407f3df4406d953627e7724607b73c0a745da6c687a2762607b8448277a0bb4a9dff04a39bb056b37c2dc936507aef8dad2ada20a4113a2c20ca9273da14c0ad94c18658b91c852dc3cdd5331c5ef1920564594dd39f0e6335c63e055814cbbdff4d508227a604e438c4bdd90f5acb09d5e4e6ac4f41668c912459d2945a35107664642f99dcb7be6963b6099b7b5298db1ac87bb86da08678d2c51ed0c65cb1826925a16f8052830af98ed5f0fecf89ab09c1d02b0d408f6785841cca8fb5b2afa09079db7b062da9c01685c579d4917696ec1183085dc002dd8103ca1188108f2570431537340c01bb1e642dfca43c0a28769d3e75bd55278b58980854789068ce3d5a8779d86965b544b119185cfeed2e5601a9a61b30544dda20931af4c85bb146256501a9589c149530c3655f82168bac771909fe5bd155d34ae3bf73812dd35f88d48268b0ff4bd283f309d7a9861cdc856eeae185be7c89374d827d9cd68ba59a201ab11daa50aa1b4893d869be61387a1a468e348b0fd117beba8ba7db41cc65975514f00d366fe14626fde78bb60a52d694432b3d8d80d23b1d184e23a5fad87fc8490589ba9a814ce0aef05c39c6e0383d64a7e696595022bc88df8006648af1e9c92a91af889e62c6bc0076aa603ebf1b1f0fceeb0295b40827d584ffb677f27c07beee93a2dbccb7cbd37b8b2cdaaff4bf8a634d63122586c857582b2b6c0ca85a04c4a4975d16f2a81aa00a5187a9a0a665d5734deb9338f839a3ed552f7c02c54e10d30e5d1d8391edff77dfb17c16621ec31a4a13e6e77bdf391b281686df2da11e6b87c56776fb12da5ac7f159793dc8135831d2eda3564800204b3433eff4f755316c0518a5b48b0379e2980f07f4eb6d5e121ce444cb4cabc262e2ebf976a9df1773bb602b9e4d1301edab0117c682a405340df4bd516eafc2eb04b501714105bd0079a22eeaf8cfd763fc04081f502ee01375beb4e3b451f5f8361517022c3af43eeada3ca9d5d43cf3a2badd65c3c5cc2f7b8ae6d737be6b38af8f0d84ad9aeb5ec958928ad1840be81bf712bac155ebb3bcb5cfa3ce3a963388c076c2d4f4d81b45066547a3ec6d63fed27c4739b0146f6bf747005b635525ae326b92e729aa82a822ff40299d984ead775d36cda8cd80b52bd05a81c472dcf29ce237c252d78f75b6107766817044b94d83b9e89557d100fab511ad08b7d02510588639d35949206f2b6452665e1654dd408f77dc6c12415b1ccd938fd09763f8e6539e33d51659d8c4f6d2b0c1df1dc822e76e67a694c34dce3c7c889a420eaf1184560f63a4b37e25a5c5e6576a13d9b71f50e862525e7ff13326d92d75c47c85da74bf323c4f6300083266ac7e15232d49f25da7d5f20f35f73678acf00c0b04a14900119e109282b84f70dbf187bd3394352e65cdc7100292c942dcd82e5f55252b4366c70bbc82dec0b0a08eb294a0936bd5a555fbcecb74611fd303d95e34b7e5b1e401ffddf62a93c9af7792c477168ffce2bd4cae32656a65a6156695c154b49f6aff68b071dba2c63ce0bd4591f620e6d6a7a9de31456092da52e1971762474b92945f4e82af6495388b1f7884ea2b49d87a628dc895b917bc608721c1c3db9e7a2dd86162725435bbb5527c9184b98c99e1b0f5e4460611bc71bcd77aed6d7bc0a6f24c9ec3a4fecc7ddf26a1bf3e23f66379e769b19d0f77ec5cf5d8516702254b10cb0bc3db2122ba457648d981427eebbea33c4fe78dcc7ecb6e2f7c5d917ed2abf9a748011283352f7f5ccc932ec230406b22c6b2c4adf6d6a8b0ff460e85a92b91fab8428af35945b0523efbda9260667e6d83d4137f943632471eb5e9b07592fce373ec8a9a134290d9e13847861c690db31e9c370d8732c1dca8eb048ac6f989c1ec9188210aa9b49fbc38d2fe826dc89efb7ea02bc011fd1d2760f0842c8acf65542b95360df34bfdd0f2a5204dc917d331c88365e448c36b500c3c460de2ad943e3b591a55fdcd1b8e59eaa2e56aa08eb30f9d02eb14d4a3b3393fb0496837cf5d05572d276930e15eeb9aab09b4d9033acd2811d55fac4b4c08e417ad5bad3ab76b4c997d61e5c25814412279532793c749e1dfe64d43ffb72f1c97d47083debcfff7b78454df03d5cdd7080c8da3edc8250299ffcb78ffc153de3a5cdfdbc6331ef13af3d8f7cdc14480e4c6f28ddb4bc9e4412d9e97f09bff4149292607ff3300cdfbf90e91f63c443dd073e7184b59144d891b7206973898934407bf81e6b0023606012eb35a15a6bdfe53e528e10a53b0c568e43d5252ade375ad004ada38bb5ef60a446e963d85e97c031494b9c5b1bccd8ed41d43992d0d104a0c47036b531b75c90ce7ff657ee1ee4cbcb245bc56f17191af7956afb76b80417145f558f4c1b7f9a65c4b630703a1b910002ed62c79d44197c30fde032d0d04be5e23540db76ae9e331d60d721c457abdd1124c7ce889f00670ab7b65704b6c55a75112946659ec38846b61fe32145bc90885fc2f25c89e097c9f9495637506fca709e226e5a62249eaa339dffae448038ebb9bf9db4e8b53859191a4d69f039d77575e0abbe16d2096b4646895c2dc6b1c782ec14bcafbf8e25001bdf5f23d3c34cc3ea9c8dc2cb27bf1cb86d8862cfa6806da98ebe94872bbb27fccf6f7bc23a588b798e1c0f45c2b96b52433325a94530aacabf1890c60786e94170f933b04abe6392301816cf4cd32baa6800a90e3cc9f339cb23551e4e9b7e5a770ad3b715201a6374e383aa2ea2f2c860b680715daccc16530fc70d2aa02a70f76b9a00d86b9f2efa823c95138beef16d40731ad5ec2151762de104cf3739af36e300f3e24618e3fd69529e2f3cf88dbb3346d025108f876813838b8a27bd3f9eb98f21154e05c6a84739ad4195f5907c0915da5a3c095c24d9a0c2a80e7c6f6b0e84cd2b88393cb5fb6381e27a8efa7b1664b2296f1cc65cd2cb585ca684a32fe432e76a1bc110579c9aa79980c954b21d09421b4be43ed27732f6eb2b7998235de6014cb35f73de9f225f0552dc42d73fb19387573869d3bad9122c8f66b7e6d1c58b4a0f86a58e21dc9d64aed8349e9cd3d514d786680400fd2e914f701ec2b5d5b3a1df43bc9732e7024a720ac0b6079b2eacba61240c2d24ab3ac34ce9a0ebadeec65424e6a53e90bb57a4623b98d9a80fc5e1b2996068dc7973b1a2217e819307ae4494c12708cf28920d58863ad66a2da71a8c333d2dae7d5f1c1fc3e1f1c92113323e3bb2329963530312256175a9576050a857054369740afddd0afba275c8495a9880080e799ac352c0777953183df2dd0735c27b3c61719358e507d5543ea2e8c27f97fa5ed8de85458cf5200d5cc715e623b92b4e1f8d3977cf208010102048d6f74bc90b5518e79eb2a51085520bf8f6d9820c69323bc52939cb33afdac2f0b7f92435d8583e3b3b6072be9e1df2b9b13c1cdd848f1a806ad6e085815600e34c8597e895631fe76e0775bfc725d6be21ca2f2e218b638d9cbf72daa2559e405f498543f7521cced272f38b97014bef9d665e8d6da8841f5ea5c149db4bbdf6cfbf415a713ffa42c4a565c2dc4899c052c302798199963116f822f02c7dff9bfa5bcfbea4e8ee508d99291ece29f4185cebe1a64bb0aae33ad4ced0a7bed907419e6f5241390b090931017116e6c78288132767b786ae40e82ba3f9270c2c71ef0d297fd5264d9e38de3e34b2f6d5071570567df18cbacd70463dd09ea1c96fd2e9a918389ce1c15e639156bdcd7bbaaa5936b3d577e3c70f8e8808d80fd9d0ca22e6de62bddaa678396067183f12ce73ae98102937c015141ee62459847a3de4e632f997bac4f7519ebfea9b670a7f17292f3242a28485e7fdd540a3f9afb9f86fb95cb8ae512e1cdda254e3a1e56bf905177843c9c84bcb837a4791c224603157c45546aef39717cb42c9ed4e6189151637d904166fb91027a915db858a9df47ede6b52df9b6afa83c79e2078067c3eaa3c2a7129331be1d54d18be426d57f60b7f9ba8a749215584ce2114be769b64b5699c45d6ccb46905581b978d40359dd1f59449059769f741c33f763ff5356fbe1a323c255baeb8bf6b8eb0c9a0d6fcdbade9290c4da3cc86a919f883cfa806f27660359b995e8e13611688d4575834bcf8c6e0fc27b1213f5d02c468b18e0e0bb3bdeb24e70962704f539e095b6d1e30829c5bd4595b8223ae5f91b794ebe2d634e9bfca7d01cf922edf7b6ac4c8bb3b89da4c7410e98ac192d150f395f2f4f3bedc5bec239e44daeefe9938f605d601a693e41b5973cc8bad276eca78c3b560b9351901dd91235291c9b77836566c31dc97f8924dd3b976a295f3bc8a883078b6c50021a69386e8665155dfccb577d03c6d75f7fb49395962e3f7e2f373291b66dfc8fdce01d446b3e052325053f393a0ba517395edd36547929307cc797668ac3efbd39b22f53c0ccc92d4edd67fe7cac6b7f6af7816c603c42dd84f324e95fdbab194ee5d2928d55e82270f40329a852ba5238b05f49e71c6e5de1eb0a1ab875a0799a16f11eae81072027d69119821edccebb06739129ba33ce19c9470262c37fd637936f0320cfebe40b76046f2f66b55785a5ec1547743ff9221e4ff8272e77a941a97cfeb15ab74a4bb56ae61b467866a01bcb98f2e04e786663e3a9f641e35264ea3990843aa8cf0fff648f04a914315ac07064bf1613aa9bea6b77b2eabd6d62d964a18519b77b3911b6fdae0dd333be75e786bd0c12ed0ab8ec38a735ef4e2fdafb1c66e900162c0ee882bed6ef334cef96291c0a981deb99f65b341758cef9d0e360cb7aeea5fa711cdb03799536b887358a695f60a5da41f506aad5b59a2fee077794b6bc1288750bcff93c820f30d0c304286ed7fb523e1423078e9aa3384007b2104a83a0358993da6be18d8a850dec0fb76e7cf6fa6c2fe5e42b755cdf89f7adfe99f692d0059adc70907ed801d1748002c89f36cc64d17ae73147b0b01ba752b15b67efd3038e508fb4688bee90d0da0d2e9b07609b328c897fc8ef8d79f7ba734797caff21e4f27351068206f6717a8e5ac0cf2dd5c46e67c3c1e4813857d5322c02bdf168298e81705f8ac78a9cce55b1e217bf968c3803c31d416357ca063ce9bc37daf3fd742b8d8026023ed36b828156853bada957da8d40b849fdceeb83e1fa75bf73771728a8d7bd8a8cd61c8e35049ea9a7c5b5eab2c358a17135b72504b296c02c9f5b73d2941726d3e2f115ddca47bcb3a186e76b200f5e6e02264ac78a9fb2cb41c63fff0def92703f09c2] */
